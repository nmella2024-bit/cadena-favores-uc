---
title: "Ejercicio 3"
topic: "General"
number: "3"
originalUrl: "exports/downloads/Todos los ramos/Examen 2015 s2_3Z7VEajiuOkiEhlwDmAn.pdf"
sourceFile: "Examen 2015 s2_3Z7VEajiuOkiEhlwDmAn.pdf"
---

(60 puntos) Escribe un programa Python que permita realizar acciones sobre un tablero de   buscaminas . Para esto, considera que tienes un archivo llamado   buscaminas.txt   con el estado de un tablero. En éste, cada celda es un string de dos caracteres. El primero (de izquierda a derecha) dice si la celda está descubierta o no ( ’1’   o   ’0’ ), mientras que el segundo caracter indica si en esa casilla hay una bomba o no ( ’1’   o   ’0’ ). Con esto, existen 4 posibilidades para cada celda:  ’00’ : La celda no está descubierta y no tiene bomba.  ’01’ : La celda no está descubierta, pero tiene bomba.  ’10’ : La celda está descubierta y no tiene bomba.  ’11’ : La celda está descubierta y además tiene una bomba. El archivo   buscaminas.txt   tiene cada una de las celdas separadas por comas “ , ”. Por ejemplo, se muestra el contenido de un ejemplo del archivo   buscaminas.txt , y al lado derecho el tablero que representa. buscaminas.txt  00,01,00,00 01,00,10,10 00,00,00,00 10,10,00,10  Con esta información se te pide: 1. (10 puntos) Crear la función   esta_descubierta(x,y)   que reciba las coordenadas   x   e  y   de una celda y retorne   True   si la celda está descubierta o   False   si no está descubierta (está oculta) en el tablero. Por ejemplo,   esta_descubierta(2,3)   retorna   False , pues la celda es   ’00’ , por lo tanto no está descubierta. 2. (20 puntos) Crear la función   descubrir(x,y)   que reciba las coordenadas   x   e   y   de una celda y le cambie el estado a la celda (el primer dígito) siempre y cuando sea posi- ble (es decir, no está descubierta) y actualiza el estado de todo el tablero en el archivo  buscaminas.txt . 3. (30 puntos) Crear la función   dar_pista(x,y)   que recibe las coordenadas   x   e   y   de una celda y retorne la cantidad de bombas adyacentes a dicha celda (considerando 8 direcciones). Por ejemplo,   dar_pista(2,1)   retorna   1 , dado que hay una bomba en la coordenada (1,0). Nota que no puedes agregar más parámetros a las funciones. 10

--- Page 11 ---
Ejemplo solución problema 3  Solución 1  def leer_tablero(): lector   =   open(’buscaminas.txt’) tablero   =   [] for linea   in   lector: fila   =   linea.strip().split(",") tablero.append(fila) lector.close() return   tablero def escribir_tablero(tablero): escritor   =   open(’buscaminas.txt’,’w’) for fila   in   tablero: linea   =   ",".join(fila) print(linea,file=escritor) escritor.close() def esta_descubierta(col,   fila): tablero   =   leer_tablero(’buscaminas.txt’) celda   =   tablero[fila][col] if celda[0]   ==   "1": descubierta   =   True else: descubierta   =   False return   descubierta def descubrir(col,   fila): tablero   =   leer_tablero(’buscaminas.txt’) celda   =   tablero[fila][col] if celda[0]   ==   "0": nueva_celda   =   "1"   +   celda[1] tablero[fila][col]   =   nueva_celda escribir_tablero(tablero, "tablero_mod.txt") def dar_pista(col,   fila): tablero   =   leer_tablero(’buscaminas.txt’) bombas   =   0 if fila   >   0   and   col   >   0   and tablero[fila-1][col-1][1] == "1": bombas   +=   1 if fila   >   0   and   tablero[fila-1][col][1] == "1": bombas   +=   1 if fila   >   0   and   col+1   <   len(tablero[0]) and tablero[fila-1][col+1][1] == "1": bombas   +=   1 if col   >   0   and   tablero[fila][col-1][1] == "1": bombas   +=   1 if col+1   <   len(tablero[0]) and tablero[fila][col+1][1] == "1": bombas   +=   1  11

--- Page 12 ---
if col   >   0   and   fila+1   <   len(tablero) and   \ tablero[fila+1][col-1][1] == "1": bombas   +=   1 if fila+1   <   len(tablero)   and tablero[fila+1][col][1] == "1": bombas   +=   1 if col+1   <   len(tablero[0]) and fila+1 < len(tablero) and \ tablero[fila+1][col+1][1] == "1": bombas   +=   1 return   bombas  Solución 2  def leer_tablero(nombre_archivo): ar = open(nombre_archivo) tablero   =   [] for l in   ar: tablero.append(l.strip().split(’,’)) ar.close() return   tablero def escribir_tablero(nombre_archivo, tablero): ar = open(nombre_archivo,   "w") for f in   tablero: for   i   in   range(len(f)): ar.write(f[i]) if   i   <   len(f)-1: ar.write(’,’) else: ar.write(’\n’) ar.close() def esta_descubierta(x,y): tablero   =   leer_tablero("buscaminas.txt") celda =   tablero[x][y] return   celda[0]   ==   ’1’ def descubrir(x,y): tablero   =   leer_tablero("buscaminas.txt") if not   esta_descubierta(x,y): tablero[x][y]   =   ’1’   +   tablero[x][y][1] escribir_tablero("buscaminas.txt", tablero) def dar_pista(x,y): tablero   =   leer_tablero("buscaminas.txt") n_bombas   =   0 alto =   len(tablero) ancho =   len(tablero[0]) if x-1   >=   0   and   y-1   >=   0   and tablero[x-1][y-1][1] == ’1’: n_bombas   +=   1 if x-1   >=   0   and   tablero[x-1][y][1] == ’1’:  12

--- Page 13 ---
n_bombas   +=   1 if x-1   >=   0   and   y+1   <   ancho and tablero[x-1][y+1][1] == ’1’: n_bombas   +=   1 if y+1   <   ancho   and   tablero[x][y+1][1] == ’1’: n_bombas   +=   1 if x+1   <   alto   and   y+1   <   ancho and tablero[x+1][y+1][1] == ’1’: n_bombas   +=   1 if x+1   <   alto   and   tablero[x+1][y][1] == ’1’: n_bombas   +=   1 if x+1   <   alto   and   y-1   >=   0 and tablero[x+1][y-1][1] == ’1’: n_bombas   +=   1 if y-1   >=   0   and   tablero[x][y-1][1] == ’1’: n_bombas   +=   1 return   n_bombas  13

--- Page 14 ---
Criterios de evaluación problema 3 Aspecto   No logrado   Logrado con observa- ciones Logrado  Función  esta_descubierta  (10 puntos) Sin código, o código tiene errores mayores (0 pts) Lectura del archivo y ob- tención de estado de cel- da (5 puntos) Lectura del archivo y ob- tención de estado de cel- da (10 puntos) Función   descubrir  (20 puntos) Sin código, o código tiene errores mayores (0 pts) Cambio   del   estado cuando es posible (4 pts) Actualización   estado del tablero en archivo (6 pts) Cambio   del   estado cuando es posible (8 pts) Actualización   estado del tablero en archivo (12 pts) Función   dar_pista  (30 puntos) Sin código, o código tiene errores mayores (0 pts) Lectura de si hay o no bomba en una celda (2 pts) Verificación de bomba en interior de tablero (2 pts) Verificación de bomba sin traspasar límite su- perior (2 pts) Verificación de bomba sin traspasar límite in- ferior (2 pts) Verificación de bom- ba sin traspasar límite izquierdo (2 pts) Verificación de bom- ba sin traspasar límite derecho (2 pts) Contar bombas y re- tornar suma (2 pts) Lectura de si hay o no bomba en una celda (5 pts) Verificación de bomba en interior de tablero (4 pts) Verificación de bomba sin traspasar límite su- perior (4 pts) Verificación de bomba sin traspasar límite in- ferior (4 pts) Verificación de bom- ba sin traspasar límite izquierdo (4 pts) Verificación de bom- ba sin traspasar límite derecho (4 pts) Contar bombas y re- tornar suma (5 pts) 14

--- Page 15 ---